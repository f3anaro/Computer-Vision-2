# Simple debug build. Requires OpenCV2 lib, therefore
# this job can only be performed by runners with the
# "opencv2" tag
build:
  script:
    - mkdir build/
    - cd build
    - cmake -D CMAKE_BUILD_TYPE=Debug ..
    - make
  tags:
    - cmake
    - opencv2
    - gcc

# Force usage of our custom getopt implementation
build-getopt:
  script:
    - mkdir build/
    - cd build
    - cmake -D CMAKE_BUILD_TYPE=Debug -D FORCE_WINGETOPT=ON ..
    - make
  tags:
    - cmake
    - opencv2
    - gcc

# Special build for Windows
# Loads the OpenCV directory from the environmetal variable "OpenCV_DIR"

# Building with Visual Studio 12 2013
build-visual-studio:
  script:
    - mkdir build
    - cd build
    - cmake -G "Visual Studio 12 Win64" -D CMAKE_BUILD_TYPE=Debug ..
    - cmake --build .
  tags:
    - opencv2
    - windows
    - cmake
    - visual-studio

# MinGW builds
# 
# build-mingw:
#   script:
#     - mkdir build
#     - cd build
#     - cmake -G "MinGW Makefiles" -D CMAKE_BUILD_TYPE=Debug ..
#     - cmake --build .
#   tags:
#     - opencv2
#     - windows
#     - cmake
#     - mingw

# # Force usage of our custom getopt implementation
# build-getopt-mingw:
#   script:
#     - mkdir build
#     - cd build
#     - cmake -G "MinGW Makefiles" -D CMAKE_BUILD_TYPE=Debug -D FORCE_WINGETOPT=ON ..
#     - cmake --build .
#   tags:
#     - opencv2
#     - windows
#     - cmake
#     - mingw

